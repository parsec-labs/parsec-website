"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){var e=function(e){return[".rocket-scene",e].filter(function(e){return e}).join("__")},t=document.querySelector(e()),o=t.querySelector(e("takeoff")),r=t.querySelector(e("stars2"));window.launchRocket=function(){var t=new TimelineMax({});o.style.opacity="1",r.style.opacity="1",t.addLabel("start",10).add(TweenMax.from(e("takeoff"),.5,{scaleY:0,y:-200,ease:Expo.easeInOut})).add(TweenMax.to(e("rocket"),1,{className:"+=st-shake",delay:-1})).add(TweenMax.to(e("smoke"),2,{y:-50,delay:1})).add(TweenMax.to(e("rocket"),1,{className:"-=st-shake"})).add(TweenMax.to(e("rocket"),1,{y:-300,delay:-1})).add(TweenMax.to(e("takeoff"),1,{y:-300,delay:-1})).add(TweenMax.to(e("smoke"),3,{scale:1,y:-20,delay:-.8})).add(TweenMax.to(".rocket-status--success",3,{className:"+=st-active",delay:-2.2})).add(TweenMax.to(e("rocket"),1,{y:-10,rotate:40,delay:-3})).add(TweenMax.to(e("takeoff"),.2,{opacity:0,delay:-3})).add(TweenMax.to(e("stars"),.2,{opacity:0,delay:-3})).add(TweenMax.from(e("stars2"),.2,{opacity:0,delay:-3})).add(TweenMax.to(e(),.2,{rotation:40,delay:-3})).add(TweenMax.to(e("smoke"),.2,{opacity:0})).add(TweenMax.to(".rocket-status--success",.3,{opacity:0,delay:-.5}))}}(),function(){var e=function(e,t){return('\n<span class="timer__part">\n  '+String(e).padStart(2,"0")+" <span>"+t[1===e?0:1]+"</span>\n</span>").trim()};window.initTimer=function(t){setInterval(function(){if(t.dataset){var o=Number(t.dataset.until)-Math.round(Date.now()/1e3),r=[e(Math.floor(o/86400),["day","days"]),e(Math.floor(o%86400/3600),["hour","hours"]),e(Math.floor(o%3600/60),["minute","minutes"]),e(o%60,["second","seconds"])].join("");t.innerHTML=r}},1e3)}}(),function(){var e,t=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.statusText));return o.status=e.status,o.response=e,o}return _inherits(t,Error),t}();window.requestApi=(e="https://sarrsmlpsg.execute-api.eu-west-1.amazonaws.com/v0",function(o,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s={method:o,headers:Object.assign({Accept:"application/json","Content-Type":"application/json"},n),body:a&&JSON.stringify(a)};return fetch(e+"/"+r,s).then(function(e){return e.status>=200&&e.status<300?e.json():e.status<500?Promise.reject(new t(e)):Promise.reject("Server error")}).then(function(e){if(e.status&&"error"===e.status)throw e;return e})})}(),function(){var e=document.querySelector(".promo-form"),t=e.querySelector(".button[type=submit]"),o=e.querySelector(".input[name=promoCode]");new IMask(o,{mask:"0000-0000-0000"});var r=!1;e.addEventListener("submit",function(o){if(o.preventDefault(),!r&&!e.querySelector(".row[data-error]")){var a=new FormData(o.target);t.setAttribute("disabled",!0),r=!0,window.requestApi("post","submit",{email:a.get("email"),promoCode:a.get("promoCode")}).then(function(){setTimeout(function(){document.querySelector(".promo-form__content").dataset.mode="timer",document.querySelector(".intro p").innerHTML="<strong>Thank you!</strong><br /> Some really motivational text goes here"},5200),window.launchRocket()},function(t){var o=t.errors;Object.keys(o).forEach(function(t){var r=e.querySelector('[name="'+t+'"]');r&&r.parentNode&&(r.parentNode.dataset.error=o[t])}),document.querySelector(".rocket-status--fail").classList.add("st-active"),r=!1})}}),e.addEventListener("change",function(){document.querySelector(".rocket-status--fail").classList.remove("st-active"),t.removeAttribute("disabled"),Array.from(e.querySelectorAll(".row")).forEach(function(e){delete e.dataset.error})}),Array.from(document.querySelectorAll(".timer")).forEach(window.initTimer)}();